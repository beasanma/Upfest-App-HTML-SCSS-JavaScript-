<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link href="global.css" rel="stylesheet">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Search</title>
</head>
<body>
<div class="container">

    <div class="search_bar">
        <img src="icons/nav_search.svg" alt="search_icon">
        <span> Encontra um festival ou artista </span>
    </div>

    <div class="fest_container">
        <h2> Festivais </h2>
        <div class="festivals">
            <div class="event_tab">
                <img class="pics" src="images/sonar_24.jpg" alt="sonar24">
                <div class="event_tab_desc">
                    <h3> SONAR 2024 </h3>
                    <p class="p1"> sábado 30 set. </p>
                    <p class="p2"> Pavilhão Carlos Lopes </p>
                </a>
                </div>
                <div class="icons">
                    <img class="heart-icon" src="icons/heart_open.svg" alt="favorites" data-id="sonar2024">
                </div>
            </div>
        </div>
        <div class="festivals">
            <div class="event_tab">
                <img class="pics" src="images/brunch.jpg" alt="brunch">
                <div class="event_tab_desc">
                    <h3> BRUNCH ELECTRONIK L... </h3>
                    <p class="p1"> domingo 17 set. </p>
                    <p class="p2"> Pavilhão Carlos Lopes </p>
                </div>
                <div class="icons">
                    <img class="heart-icon" src="icons/heart_open.svg" alt="favorites" data-id="brunch">
                </div>
            </div>
        </div>

        <div class="festivals">
            <div class="event_tab">
                <a href="Festivals_Page.html">
                <img class="pics" src="images/somnii_24.jpg" alt="somnii24">
                </a>
                <div class="event_tab_desc">
                    <h3> RFM SOMNII 2024 </h3>
                    <p class="p1"> sexta 12 jul. </p>
                    <p class="p2"> Praia do Relógio, Figueira da Foz </p>
                </div>
                <div class="icons">
                    <img class="heart-icon" src="icons/heart_open.svg" alt="favorites" data-id="somnii2024">
                </div>
            </div>
        </div>
    </div>

    <div class="art_container">
        <h2> Artistas </h2>
        <div class="artist_tab">
            <img class="pics" src="images/amelie.jpg" alt="amelie">
            <div class="artist_tab_desc">
                <h3> AMELIE LENS </h3>
                <p class="p1"> Artista </p>
            </div>
            <div class="icons">
                <img class="heart-icon" src="icons/heart_open.svg" alt="favorites" data-id="amelie">
            </div>
        </div>
        <div class="artist_tab">
            <img class="pics" src="images/timmy.jpg" alt="timmy">
            <div class="artist_tab_desc">
                <h3> TIMMY TRUMPET </h3>
                <p class="p1"> Artista </p>
            </div>
            <div class="icons">
                <img class="heart-icon" src="icons/heart_open.svg" alt="favorites" data-id="timmy">
            </div>
        </div>
        <div class="artist_tab">
            <img class="pics" src="images/artbat.jpg" alt="artbat">
            <div class="artist_tab_desc">
                <h3> ARTBAT </h3>
                <p class="p1"> Artista </p>
            </div>
            <div class="icons">
                <img class="heart-icon" src="icons/heart_open.svg" alt="favorites" data-id="artbat">
            </div>
        </div>
        <div class="artist_tab">
            <img class="pics" src="images/nto.jpg" alt="nto">
            <div class="artist_tab_desc">
                <h3> N'TO </h3>
                <p class="p1"> Artista </p>
            </div>
            <div class="icons">
                <img class="heart-icon" src="icons/heart_open.svg" alt="favorites" data-id="n_to">
            </div>
        </div>

        <div class="nav_bar">
            <a href="Home_Page.html">
                <img src="icons/nav_home.svg" alt="Home Page">
            </a>
            <a href="Search_Page.html">
                <img src="icons/nav_search.svg" alt="Search Page">
            </a>
            <a href="Ticket_Page.html">
                <img src="icons/nav_ticket.svg" alt="Ticketing Page">
            </a>
            <a href="Personal_Page.html">
                <img src="icons/nav_user.svg" alt="Personal Page">
            </a>
        </div>

        <script>
            document.addEventListener("DOMContentLoaded", function () {
                let heart_icons = document.querySelectorAll(".heart-icon");
                let icon_id = "favorites_list";

                let favorites_list = JSON.parse(localStorage.getItem(icon_id)) || [];

                heart_icons.forEach(heart => {
                    let id = heart.getAttribute("data-id");

                    if (favorites_list.includes(id)) {
                        heart.src = "icons/heart_full.svg";
                    }

                    heart.addEventListener("click", function () {
                        favorite_hearts(id);
                    });
                });

                function favorite_hearts(id) {
                    let index = favorites_list.indexOf(id);

                    if (index === -1) {
                        favorites_list.push(id);
                    } else {
                        favorites_list.splice(index, 1);
                    }

                    localStorage.setItem(icon_id, JSON.stringify(favorites_list));

                    document.querySelectorAll(`[data-id="${id}"]`).forEach(icon => {
                        icon.src = favorites_list.includes(id) ? "icons/heart_full.svg" : "icons/heart_open.svg";
                    });
                }
            });
        </script>
    </div>
</div>
</body>
</html>